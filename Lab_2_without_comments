num_states = int(input("Введите количество штатов: "))
electors = {}
votes = {}

for _ in range(num_states):
    state_info = input().strip().split()
    state_name = state_info[0]
    elector_count = int(state_info[1])
    electors[state_name] = elector_count
    votes[state_name] = {}

num_votes = int(input("Введите количество голосов: "))

for _ in range(num_votes):
    vote_info = input().strip().split()
    state_name = vote_info[0]
    candidate_name = vote_info[1]

    if candidate_name not in votes[state_name]:
        votes[state_name][candidate_name] = 0
    votes[state_name][candidate_name] += 1

total_votes = {}
for state, candidates in votes.items():
    max_votes = max(candidates.values())
    winners = [candidate for candidate, count in candidates.items() if count == max_votes]
    winner = min(winners)
    if winner not in total_votes:
        total_votes[winner] = 0
    total_votes[winner] += electors[state]

sorted_candidates = sorted(total_votes.items(), key=lambda x: (-x[1], x[0]))

for candidate, votes in sorted_candidates:
    print(f"{candidate} {votes}")

# Пример ввода:
# Кол-во штатов: 3
# Штат1 5
# Штат2 3
# Штат3 4
# Кол-во голосов: 10
# Штат1 КандидатА
# Штат1 КандидатБ
# Штат1 КандидатА
# Штат2 КандидатБ
# Штат2 КандидатБ
# Штат3 КандидатА
# Штат3 КандидатА
# Штат3 КандидатБ
# Штат3 КандидатБ
# Штат3 КандидатБ


#Еще пример ввода:
#Кол-во штатов: 2
#Штат1 25
#Штат2  23
#Кол-во голосов: 11
#Штат1  Baiden
#Штат1  Baiden
#Штат1  Trump
#Штат1  Trump
#Штат1  Trump
#Штат2 Baiden
#Штат2 Baiden
#Штат2 Baiden
#Штат2 Baiden
#Штат2 Baiden
#Штат2 Trump
